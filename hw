<!DOCTYPE html>
<html lang="ru">
  <head>
    <!-- Yandex.RTB -->
    <script>window.yaContextCb=window.yaContextCb||[]</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>


    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
      (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
      m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
      (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

      ym(88431857, "init", {
          clickmap:true,
          trackLinks:true,
          accurateTrackBounce:true,
          webvisor:true
      });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/88431857" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>schooltime | д/з</title>
    <link rel="stylesheet" href="style.css" />
    <link rel"stylesheet" href="block.css" />
    <!-- ниже подключили стили для мобильных устройств: в конце урока сможете поделиться проектом в социальных сетях без страха, что на телефоне друга или подруги будет выглядеть некрасиво -->
    <link rel="icon" type="image" href="images/logo.png" />
    <script src ="assets/libs/add-to-homescreen-master/src/addtohomescreen.js"></script>
    <script>addToHomescreen()</script>

    <!-- Yandex.RTB R-A-1653769-1 -->
    <script>window.yaContextCb.push(()=>{
      Ya.Context.AdvManager.render({
        type: 'floorAd',
        blockId: 'R-A-1653769-1'
      })
    })</script>
</head>
  <body>
    <div class="header_father">
      <div class="header">
        <p class="logo">schooltime</p>
        <img
          src="https://lh3.googleusercontent.com/pw/AM-JKLWdVsiD-j71iKTHB-jlgJ6nOHYoB8pg27D7NpJ2nlTHWk5ccE6bdYIzNA8IbqCQQcG4LMdXRPhTvjr6ICkhzUoHNjVRVSSpXsZI4uOTmR8L8ubIKL2NpjRhMwXWgTr_rohRNgqdL4ct_kZ227iqjXWw=s517-no?authuser=0"
          alt="menu"
          class="menu_btn"
        />
        <div style="text-align: end" class="btns_container">
          <a href="index.html" class="down-btn button">Главная</a>
          <a href="news" class="news-btn button">Новости</a>
          <a href="hw" class="hw-btn button selected">Д/З</a>
          <a href="shedule" class="raspis-btn button">Расписание</a>
        </div>
      </div>
    </div>

    <div class="menu">
      <div class="menu_inner">
        <h1 style="margin-bottom: 16px">Меню</h1>
        <div class="menu_btns">
          <p id="m_down" class="menu_in_button">Главная</p>
          <p id="m_news" class="menu_in_button">Новости</p>
          <p id="m_hw" class="menu_in_button">Д/З</p>
          <p id="m_raspis" class="menu_in_button">Расписание</p>
        </div>
      </div>
    </div>

    <div class="content">
      <div style="padding: 34px" class="container">
        <h1 style="margin-top: 0; margin-bottom: 16px;">Домашние задания</h1>
        <h4 style="color: green; margin-bottom: 4px">Последнее</h4>
        <div id="last-hw" class="hw-box">
          <h2 id="last-hw-date" style="color: #2196f3; margin: 0">
            День недели, 10
          </h2>
          <div id="lessons">
            <div class="hw-item">
              <h3 id="les1" style="margin: 0">Урок 1</h3>
              <p id="hw1" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les2" style="margin: 0">Урок 2</h3>
              <p id="hw2" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les3" style="margin: 0">Урок 3</h3>
              <p id="hw3" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les4" style="margin: 0">Урок 4</h3>
              <p id="hw4" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les5" style="margin: 0">Урок 5</h3>
              <p id="hw5" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les6" style="margin: 0">Урок 6</h3>
              <p id="hw6" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item">
              <h3 id="les7" style="margin: 0">Урок 7</h3>
              <p id="hw7" style="margin: 0">Домашнее задание</p>
            </div>
            <div class="hw-item hw-last-item">
              <h3 id="les8" style="margin: 0">Урок 8</h3>
              <p id="hw8" style="margin: 0">Домашнее задание</p>
            </div>
          </div>
        </div>

        <div class="hw_load">Загрузить ещё...</div>
	
	<div style="margin-top: 10px;" class="bottom_ads">
      		<!-- Yandex.RTB R-A-1641995-3 -->
      		<div id="yandex_rtb_R-A-1641995-3"></div>
      		<script>window.yaContextCb.push(()=>{
        		Ya.Context.AdvManager.render({
          		type: 'floorAd',
          		blockId: 'R-A-1653769-1'
        		})
      })</script>
    </div>
      </div>

      <div id="about" class="container">
        <h1 style="margin-top: 0">О schooltime</h1>
        <p>
          Это веб-версия мобильного приложения schooltime, в которой Вам
          доступно несколько полезных разделов.
        </p>
        <h2>Доступ</h2>
        <p>
          Все разделы на сайте доступны только ученикам и преподователям класса.
        </p>
        <h2>Разделы</h2>
        <p>
          В веб-приложении Вам доступны разделы портированные с мобильной версии
          сервиса: "Новости", "Расписание", "Домашние задания". Раздел "Аккаунт"
          или же "schooltime ID" не был добавлен в веб-версию.
        </p>
      </div>
    </div>

    <div class="footer">
      <div class="footer_inner">
        <div style="width: 100%; display: flex; justify-content: space-between; align-items: center;">
          <p>© 2022 Ярослав Спиридонов</p>
          <div class="socials">
            <img src="assets/social_ic/vk.png" alt="" class="soc">
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.s3.yandex.net/web-code/smoothly.js"></script>
    <script src="script.js"></script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.2/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
        child,
        get,
      } from "https://www.gstatic.com/firebasejs/9.6.2/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyB9VevDhS1ZYOLuTDa3V758GOD-KUUOea8",
        authDomain: "school-78eac.firebaseapp.com",
        databaseURL: "https://school-78eac.firebaseio.com",
        projectId: "school-78eac",
        storageBucket: "school-78eac.appspot.com",
        messagingSenderId: "361392127189",
        appId: "1:361392127189:web:3bdf0c9fd9dfa0c7e6b65c",
        measurementId: "G-3FB7KZG6CE",
      };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      // Get a reference to the database service
      const db = getDatabase(app);
      const dbRef = ref(getDatabase());

      let last_hw;
      let time;
      let data;

      let date = document.querySelector("#last-hw-date");

      let les1 = document.querySelector("#les1");
      let les2 = document.querySelector("#les2");
      let les3 = document.querySelector("#les3");
      let les4 = document.querySelector("#les4");
      let les5 = document.querySelector("#les5");
      let les6 = document.querySelector("#les6");
      let les7 = document.querySelector("#les7");
      let les8 = document.querySelector("#les8");

      let hw1 = document.querySelector("#hw1");
      let hw2 = document.querySelector("#hw2");
      let hw3 = document.querySelector("#hw3");
      let hw4 = document.querySelector("#hw4");
      let hw5 = document.querySelector("#hw5");
      let hw6 = document.querySelector("#hw6");
      let hw7 = document.querySelector("#hw7");
      let hw8 = document.querySelector("#hw8");

      // last hw
      get(child(dbRef, `hw`))
        .then((snapshot) => {
          if (snapshot.exists()) {
            last_hw = snapshot.val();
            last_hw =
              last_hw[Object.keys(last_hw)[Object.keys(last_hw).length - 1]];
            time = last_hw["time"];
            data = last_hw["data"];
            data = JSON.parse(data);
            data = data[0];

            date.textContent = time;

            console.log(time);
            console.log(data);

            les1.textContent = data["les1"];
            hw1.textContent = data["hw1"];
            les2.textContent = data["les2"];
            hw2.textContent = data["hw2"];
            les3.textContent = data["les3"];
            hw3.textContent = data["hw3"];
            les4.textContent = data["les4"];
            hw4.textContent = data["hw4"];
            les5.textContent = data["les5"];
            hw5.textContent = data["hw5"];
            les6.textContent = data["les6"];
            hw6.textContent = data["hw6"];
            les7.textContent = data["les7"];
            hw7.textContent = data["hw7"];
            les8.textContent = data["les8"];
            hw8.textContent = data["hw8"];
          } else {
            console.log("No data available");
          }
        })
        .catch((error) => {
          console.error(error);
        });

    let pos = 0

    let loadhw = document.querySelector('.hw_load');

    let last = document.querySelector('#last-hw');

    loadhw.addEventListener('click', function () {
      pos += 1;
      let elem = document.querySelector('#last-hw');
      let clone = elem.cloneNode(true);
      clone.id = 'hw' + pos.toString();
      last.after(clone);
      last = clone;

      let les1 = clone.querySelector("#les1");
      let les2 = clone.querySelector("#les2");
      let les3 = clone.querySelector("#les3");
      let les4 = clone.querySelector("#les4");
      let les5 = clone.querySelector("#les5");
      let les6 = clone.querySelector("#les6");
      let les7 = clone.querySelector("#les7");
      let les8 = clone.querySelector("#les8");

      let hw1 = clone.querySelector("#hw1");
      let hw2 = clone.querySelector("#hw2");
      let hw3 = clone.querySelector("#hw3");
      let hw4 = clone.querySelector("#hw4");
      let hw5 = clone.querySelector("#hw5");
      let hw6 = clone.querySelector("#hw6");
      let hw7 = clone.querySelector("#hw7");
      let hw8 = clone.querySelector("#hw8");

      date = clone.querySelector('#last-hw-date');

      // last hw
      get(child(dbRef, `hw`))
        .then((snapshot) => {
          if (snapshot.exists()) {
            last_hw = snapshot.val();
            last_hw = last_hw[Object.keys(last_hw)[Object.keys(last_hw).length - pos -1]];
            time = last_hw["time"];
            data = last_hw["data"];
            data = JSON.parse(data);
            data = data[0];

            date.textContent = time;

            console.log(time);
            console.log(data);

            les1.textContent = data["les1"];
            hw1.textContent = data["hw1"];
            les2.textContent = data["les2"];
            hw2.textContent = data["hw2"];
            les3.textContent = data["les3"];
            hw3.textContent = data["hw3"];
            les4.textContent = data["les4"];
            hw4.textContent = data["hw4"];
            les5.textContent = data["les5"];
            hw5.textContent = data["hw5"];
            les6.textContent = data["les6"];
            hw6.textContent = data["hw6"];
            les7.textContent = data["les7"];
            hw7.textContent = data["hw7"];
            les8.textContent = data["les8"];
            hw8.textContent = data["hw8"];
          } else {
            console.log("No data available");
          }
        })
        .catch((error) => {
          console.error(error);
        });
    });

    </script>

    <script>
      let banner = document.querySelector('.bottom_banner');
      let close = document.querySelector('.banner_close');

      close.addEventListener('click', function () {
        banner.style.display = 'none';
      });
    </script>
  </body>
</html>
